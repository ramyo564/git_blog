---
layout: single
title: "[Todo] νΈλ¬λΈ” μν… & TIL (1)"
categories: Spring_Project_Hoops
toc: true
toc_sticky: true
author_profile: false
sidebar: 
tags:
---

# extends vs implements

λ‘ κ°κ°€ λΉ„μ·ν• κ±΄λ° μ΄λ²μ— JPAλ¥Ό ν†µν•΄ κ°μ²΄μ§€ν–¥μ μΌλ΅ λ§λ“¤λ©΄μ„ λ°°μ΄ λ‚΄μ©μ„ μ •λ¦¬

```java
@Repository  
public interface JpaTodoRepository extends JpaRepository<Todo, Long> {  
    List<Todo> findByCompleted(boolean completed);  
}
```


```java
public interface TodoRepository {  
  
  Todo save(Todo todo);  
  
  Optional<Todo> findById(Long id);  
  
  List<Todo> findAll();  
  
  void deleteById(Long id);  
  
  List<Todo> findByCompleted(boolean completed);  
}
```

```java
@Repository  
public class TodoRepositoryImpl implements TodoRepository {  
      
    private final JpaTodoRepository jpaTodoRepository;  
      
    public TodoRepositoryImpl(JpaTodoRepository jpaTodoRepository) {  
        this.jpaTodoRepository = jpaTodoRepository;  
    }  
      
    @Override  
    public Todo save(Todo todo) {  
        return jpaTodoRepository.save(todo);  
    }  
      
    @Override  
    public Optional<Todo> findById(Long id) {  
        return jpaTodoRepository.findById(id);  
    }  
      
    @Override  
    public List<Todo> findAll() {  
        return jpaTodoRepository.findAll();  
    }  
      
    @Override  
    public void deleteById(Long id) {  
        jpaTodoRepository.deleteById(id);  
    }  
      
    @Override  
    public List<Todo> findByCompleted(boolean completed) {  
        return jpaTodoRepository.findByCompleted(completed);  
    }  
}
```

## β… `extends` vs `implements` μ°¨μ΄

### 1. `extends`

- **ν΄λμ¤λΌλ¦¬** νΉμ€ **μΈν„°νμ΄μ¤λΌλ¦¬** μƒμ†ν•  λ• μ‚¬μ©ν•΄.
    
- μ¦‰, ν΄λμ¤κ°€ λ‹¤λ¥Έ **ν΄λμ¤λ¥Ό μƒμ†**ν•κ±°λ‚, μΈν„°νμ΄μ¤κ°€ λ‹¤λ¥Έ **μΈν„°νμ΄μ¤λ¥Ό ν™•μ¥**ν•  λ• μ“°μ—¬.
    
- μμ‹:

```java
public interface JpaTodoRepository extends JpaRepository<Todo, Long>
```

π‘‰ `JpaTodoRepository`λ” `JpaRepository` μΈν„°νμ΄μ¤λ¥Ό **ν™•μ¥(extends)** ν•΄μ„, κ·Έ μ•μ λ©”μ„λ“λ“¤μ„ **μƒμ†λ°›μ•„ μ‚¬μ©ν•  μ μμ–΄**.

### 2. `implements`

- ν΄λμ¤κ°€ **μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„**ν•  λ• μ‚¬μ©ν•΄.
    
- μμ‹:

```java
public class TodoRepositoryImpl implements TodoRepository

```
π‘‰ `TodoRepositoryImpl`μ€ `TodoRepository` μΈν„°νμ΄μ¤μ— μ„ μ–Έλ λ©”μ„λ“λ“¤μ„ **μ§μ ‘ κµ¬ν„**ν•΄μ•Ό ν•΄.


## β… μμ΅΄μ„± μ£Όμ… λ°©ν–¥ (DI νλ¦„)

μ¤ν”„λ§μ΄ μμ΅΄μ„± μ£Όμ…μ„ ν•΄μ¤„ λ•λ” μΌλ°μ μΌλ΅ μΈν„°νμ΄μ¤μ— κµ¬ν„μ²΄λ¥Ό μλ™μΌλ΅ μ—°κ²°ν•΄μ¤.

1. `@Repository` μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ ν΄λμ¤λ“¤μ€ **λΉ(bean)** μΌλ΅ λ“±λ΅λΌ.
    
2. `TodoRepositoryImpl`μ€ `TodoRepository` μΈν„°νμ΄μ¤λ¥Ό `implements` ν•λ‹κΉ, μ¤ν”„λ§μ€ μ΄ κµ¬ν„μ²΄λ¥Ό `TodoRepository` νƒ€μ…μΌλ΅ μΈμ‹ν•΄.
    
3. λ„κµ°κ°€κ°€ `TodoRepository` νƒ€μ…μ„ μμ΅΄μ„± μ£Όμ…μΌλ΅ μ›ν•λ©΄, μ¤ν”„λ§μ€ `TodoRepositoryImpl`μ„ μ£Όμ…ν•΄μ¤.
    

κ·Έλ¦¬κ³  `TodoRepositoryImpl` μƒμ„±μ μ•μ„ λ³΄λ©΄:

```java
public TodoRepositoryImpl(JpaTodoRepository jpaTodoRepository) {
    this.jpaTodoRepository = jpaTodoRepository;
}
```

- μ—¬κΈ°μ„ `JpaTodoRepository`λ” `JpaRepository<Todo, Long>`λ¥Ό `extends`ν• **Spring Data JPAμ κµ¬ν„μ²΄**μ•Ό.
    
- μ¤ν”„λ§μ€ `JpaTodoRepository`λ„ μλ™μΌλ΅ κµ¬ν„μ²΄λ¥Ό λ§λ“¤μ–΄μ„ μ£Όμ…ν•΄μ¤.
    

### π” κ°„λ‹¨ νλ¦„λ„

```java
[Spring Container]
       β†“
JpaTodoRepository (extends JpaRepository)
       β†“ μ£Όμ…
TodoRepositoryImpl (implements TodoRepository)
       β†“ μ£Όμ…
TodoService (uses TodoRepository)

```

## π” μ •λ¦¬ν•μλ©΄

| κµ¬λ¶„           | μ„¤λ…                        | μμ‹                                    |
| ------------ | ------------------------- | ------------------------------------- |
| `extends`    | ν΄λμ¤λ‚ μΈν„°νμ΄μ¤λ¥Ό μƒμ†            | `interface A extends B`               |
| `implements` | ν΄λμ¤κ°€ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„            | `class A implements B`                |
| μ£Όμ… λ°©ν–¥        | Springμ΄ μΈν„°νμ΄μ¤λ¥Ό λ³΄κ³  κµ¬ν„μ²΄λ¥Ό μ£Όμ… | `TodoRepository β†’ TodoRepositoryImpl` |

## β… ν•λμ— λ³΄λ” κµ¬μ΅° λΉ„κµ

|ν•­λ©|λ³€κ²½ μ „|λ³€κ²½ ν›„|
|---|---|---|
|κµ¬μ΅°|JPA μΈν„°νμ΄μ¤κ°€ λ„λ©”μΈ μΈν„°νμ΄μ¤ μ§μ ‘ κµ¬ν„|λ„λ©”μΈ μΈν„°νμ΄μ¤, JPA μΈν„°νμ΄μ¤, κµ¬ν„ ν΄λμ¤λ΅ λ¶„λ¦¬|
|μμ΅΄μ„±|λ„λ©”μΈ β†” JPA μ§μ ‘ μ—°κ²°|λ„λ©”μΈ β†” κµ¬ν„μ²΄ β†” JPA (κ°„μ ‘ μ—°κ²°)|
|μ μ—°μ„±|λ‚®μ|λ†’μ|
|ν…μ¤νΈ|μ–΄λ ¤μ›€ (JPA mock ν•„μ”)|μ‰¬μ›€ (Implλ§ Mock μ²λ¦¬ κ°€λ¥)|
|μ±…μ„ λ¶„λ¦¬|μ• λ§¤|λ…ν™•|


## User λ ν¬μ§€ν† λ¦¬ λ¶„λ¦¬

### λ³€κ²½ μ „

user/
β”β”€β”€ domain/
β”‚   β””β”€β”€ repository/
β”‚       β””β”€β”€ UserRepository.java (μΈν„°νμ΄μ¤λ§ μ΅΄μ¬)
β””β”€β”€ infrastructure/
    β””β”€β”€ persistence/
        β””β”€β”€ JpaUserRepository.java (JPA μΈν„°νμ΄μ¤)

### λ³€κ²½ ν›„

user/
β”β”€β”€ domain/
β”‚   β”β”€β”€ model/
β”‚   β”‚   β””β”€β”€ User.java
β”‚   β””β”€β”€ repository/
β”‚       β””β”€β”€ UserRepository.java (μΈν„°νμ΄μ¤)
β””β”€β”€ infrastructure/
    β””β”€β”€ persistence/
        β”β”€β”€ JpaUserRepository.java (JPA μΈν„°νμ΄μ¤)
        β””β”€β”€ UserRepositoryImpl.java (κµ¬ν„μ²΄)

### μ”μ•½

[ μΈν„°νμ΄μ¤ ] UserRepository     β†   λ„λ©”μΈμ— κ°€κΉμ΄ μ¶”μƒν™” κ³„μΈµ
                           β†‘
[ κµ¬ν„ ν΄λμ¤ ] UserRepositoryImpl   β†   JPA κΈ°μ κ³Όμ μ—°κ²°, κµ¬ν„μ²΄
                           β†‘
[ Spring Data JPA ] JpaUserRepository β†   μ§„μ§ DB λ™μ‘ λ‹΄λ‹Ή

---- 

β… μ΄λ ‡κ² λ³€κ²½ν•λ©΄ μ–»λ” μ΄μ 
1. JPA κΈ°μ κ³Ό λ„λ©”μΈ λ μ΄μ–΄λ¥Ό λ¶„λ¦¬

    JPAκ°€ μ•„λ‹ λ‹¤λ¥Έ μ €μ¥μ†(MongoDB, Redis λ“±)λ΅ λ°”κΎΈλ”λΌλ„ UserRepositoryλ” κ·Έλ€λ΅ μ μ§€ κ°€λ¥.

    ν…μ¤νΈμ—μ„ Mockμ„ λ§λ“¤κΈ°λ„ μ‰¬μ›€ (e.g. InMemoryUserRepository).

2. λ„λ©”μΈ μ£Όλ„ μ„¤κ³„(Domain-Driven Design) μ² ν•™μ— λ§λ” κµ¬μ΅°

    μΈν”„λΌμ™€ λ„λ©”μΈμ„ λμ¨ν•κ² κ²°ν•©ν•΄μ„ μ μ§€λ³΄μμ„±μ΄ λ†’μ•„μ§.

3. μ μ—°ν• μ»¤μ¤ν„°λ§μ΄μ§•

    UserRepositoryImplμ—μ„ μΌλ¶€λ§ μΊμ‹±ν•κ±°λ‚, λ΅μ§μ„ μ¶”κ°€ν•  μλ„ μμ.

```java
@Override
public Optional<User> findByEmail(String email) {
    log.info("μ΄λ©”μΌλ΅ μ‚¬μ©μ μ΅°ν μ”μ²­: {}", email);
    return jpaUserRepository.findByEmail(email);
}

```

## β… κµ¬μ΅° λΉ„κµ

|ν•­λ©|λ³€κ²½ μ „|λ³€κ²½ ν›„|
|---|---|---|
|κµ¬μ΅°|JPA μΈν„°νμ΄μ¤κ°€ λ„λ©”μΈ μΈν„°νμ΄μ¤ μ§μ ‘ κµ¬ν„|λ„λ©”μΈ μΈν„°νμ΄μ¤, JPA μΈν„°νμ΄μ¤, κµ¬ν„ ν΄λμ¤λ΅ λ¶„λ¦¬|
|μμ΅΄μ„±|λ„λ©”μΈ β†” JPA μ§μ ‘ μ—°κ²°|λ„λ©”μΈ β†” κµ¬ν„μ²΄ β†” JPA (κ°„μ ‘ μ—°κ²°)|
|μ μ—°μ„±|λ‚®μ|λ†’μ|
|ν…μ¤νΈ|μ–΄λ ¤μ›€ (JPA mock ν•„μ”)|μ‰¬μ›€ (Implλ§ Mock μ²λ¦¬ κ°€λ¥)|
|μ±…μ„ λ¶„λ¦¬|μ• λ§¤|λ…ν™•|

```
        [Application Layer]
               β†“
         UserService (λ„λ©”μΈ μ„λΉ„μ¤)

        [Domain Layer]
               β†“
     UserRepository (Port/λ„λ©”μΈ μ¶”μƒν™”)

        [Infrastructure Layer]
               β†“
UserRepositoryImpl (Adapter)
               β†“
JpaUserRepository (JPA μ–΄λ‘ν„°)

```

## β… ν—¥μ‚¬κ³ λ‚  μ•„ν‚¤ν…μ² vs DDD μ•„ν‚¤ν…μ²

| ν•­λ©    | ν—¥μ‚¬κ³ λ‚  μ•„ν‚¤ν…μ² (Hexagonal / Ports & Adapters)                                                                   | λ„λ©”μΈ μ£Όλ„ μ„¤κ³„ (DDD μ•„ν‚¤ν…μ²)                                                                                        |
| ----- | ---------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------- |
| ν•µμ‹¬ κ°λ… | λ„λ©”μΈ λ΅μ§(ν•µμ‹¬)κ³Ό μ™Έλ¶€ μ„Έκ³„(μ…μ¶λ ¥)λ¥Ό **ν¬νΈμ™€ μ–΄λ‘ν„°λ΅ λ¶„λ¦¬**                                                                    | λ„λ©”μΈμ„ μ¤‘μ‹¬μΌλ΅ μ†ν”„νΈμ›¨μ–΄λ¥Ό **λ¨λΈλ§**ν•κ³  **κ³„μΈµν™”**                                                                          |
| κ΄€μ‹¬μ‚¬   | **μ•„ν‚¤ν…μ²μ μΈ κµ¬μ΅° λ¶„λ¦¬** (μ…μ¶λ ¥κ³Ό λ„λ©”μΈ λ¶„λ¦¬)                                                                             | **λ„λ©”μΈ λ¨λΈλ§κ³Ό μ±…μ„ λ¶„λ¦¬**                                                                                          |
| λ€ν‘ κµ¬μ΅° | - Domain (Core)  <br>- Port (Interface)  <br>- Adapter (Impl)                                              | - Entity, Value Object, Aggregate  <br>- Repository, Service, Factory λ“±                                     |
| λ©μ     | μ™Έλ¶€ μμ΅΄μ„±κ³Ό λμ¨ν• μ—°κ²°  <br>μ μ§€λ³΄μμ„±κ³Ό ν…μ¤νΈμ„± ν–¥μƒ                                                                         | λ³µμ΅ν• λΉ„μ¦λ‹μ¤ λ΅μ§μ„ λ…ν™•ν•κ² κµ¬μ΅°ν™”                                                                                       |
| μμ‹    | - `UserRepository` = Port  <br>- `UserRepositoryImpl` = Adapter  <br>- `JpaUserRepository` = Infra Adapter | - `User` = Aggregate Root  <br>- `UserRepository` = Domain Layer  <br>- `UserService` = Application Service |

- **DDD μ•„ν‚¤ν…μ²**:
    
    - `UserRepository`λ” λ„λ©”μΈ μ¤‘μ‹¬ μΈν„°νμ΄μ¤λ΅ λ„λ©”μΈκ³Ό μΈν”„λΌλ¥Ό λ¶„λ¦¬
        
    - `User`λ” λ„λ©”μΈ λ¨λΈ (μ—”ν‹°ν‹° or μ• κ·Έλ¦¬κ±°νΈ)
        
- **ν—¥μ‚¬κ³ λ‚  μ•„ν‚¤ν…μ²**:
    
    - `UserRepository` = **Port** (μ™Έλ¶€μ—μ„ λ“¤μ–΄μ¤λ” μΈν„°νμ΄μ¤)
        
    - `UserRepositoryImpl`, `JpaUserRepository` = **Adapter** (μ‹¤μ  κµ¬ν„μ²΄)